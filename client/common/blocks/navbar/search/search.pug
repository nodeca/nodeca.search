//- Only one search method
if (!self.search_areas)

  li.nav-item.nav-search.nav-search__m-wide
    a.nav-link.icon.icon-search(
      href=self.link_to('search.general')
      title=self.t('search')
      data-on-click='common.blocks.navbar.search:show'
    )
    form.nav-search__form(data-on-submit='common.blocks.navbar.search:submit')
      .input-group
        span.input-group-btn
          button.btn.nav-search__go.icon.icon-search(type='submit')

        input.form-control.nav-search__input(
          placeholder=self.t('search_placeholder')
          name='query'
        )

        span.input-group-btn
          button.btn.nav-search__close.icon.icon-x(
            data-on-click='common.blocks.navbar.search:hide'
          )

  li.nav-item.nav-search.nav-search__m-narrow
    a.nav-link(
      href=self.link_to('search.general')
    )
      = self.t('search')

//- Multiple search methods (selectable)
else

  li.nav-item.nav-search.nav-search__m-wide
    a.nav-link.icon.icon-search(
      href=self.link_to('search.general')
      title=self.t('search')
      data-on-click='common.blocks.navbar.search:show'
    )
    form.nav-search__form(data-on-submit='common.blocks.navbar.search:submit')
      .input-group
        span.input-group-btn
          button.btn.nav-search__go.icon.icon-search(type='submit')

        input.form-control.nav-search__input(
          placeholder=self.t('search_placeholder')
          name='query'
        )

        span.input-group-btn
          - var menu_rnd_id = 'rnd' + String(Math.random()).slice(2, 10)

          - var default_area = self.search_areas[0];
          button.btn.nav-search__select.dropdown-toggle(
            href=self.link_to(default_area.method, { $query: default_area.params })
            data-method=default_area.method
            data-params=default_area.params
            id=menu_rnd_id
            aria-haspopup='true'
            aria-expanded='false'
            data-toggle='dropdown'
          )= default_area.title

          .dropdown-menu.dropdown-menu-right(aria-labelledby=menu_rnd_id)
            .dropdown-header= self.t('search_dropdown_header')

            button.dropdown-item(data-on-click='common.blocks.navbar.search:change_area')
              = self.t('search_general')

            each area in self.search_areas
              button.dropdown-item(
                data-method=area.method
                data-params=area.params
                data-on-click='common.blocks.navbar.search:change_area'
              )
                = area.title

        span.input-group-btn
          button.btn.nav-search__close.icon.icon-x(
            data-on-click='common.blocks.navbar.search:hide'
          )

  li.nav-item.nav-search.nav-search__m-narrow

    - var menu_rnd_id = 'rnd' + String(Math.random()).slice(2, 10)

    a.nav-link.dropdown-toggle(
      href=self.link_to('search.general')
      id=menu_rnd_id
      aria-haspopup='true'
      aria-expanded='false'
      data-toggle='dropdown'
     )
      = self.t('search')

    .dropdown-menu.dropdown-menu-right(aria-labelledby=menu_rnd_id)
      .dropdown-header= self.t('search_dropdown_header')

      a.dropdown-item(href=self.link_to('search.general'))
        = self.t('search_general')

      each area in self.search_areas
        a.dropdown-item(href=self.link_to(area.method, { $query: area.params }))
          = area.title
